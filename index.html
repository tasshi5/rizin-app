<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>RIZIN 予想アプリ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: system-ui, sans-serif;
  margin: 0;
  background: #fff;
  color: #333;
}

header {
  text-align: center;
  padding: 30px 10px;
  border-bottom: 3px solid #e60012;
}

h1 {
  color: #e60012;
  margin: 0;
  letter-spacing: 4px;
}

main {
  max-width: 800px;
  margin: 30px auto;
  padding: 0 12px;
}

.match {
  border-left: 4px solid #e60012;
  background: #fafafa;
  padding: 15px;
  margin-bottom: 20px;
}

.names {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
}

select {
  width: 100%;
  padding: 6px;
  margin-top: 8px;
}

.result-area {
  margin-top: 40px;
  padding-top: 20px;
  border-top: 2px solid #eee;
}

.hit-rate {
  margin-top: 40px;
  padding: 12px;
  font-size: 12px;
  text-align: center;
  color: #666;
  border-top: 1px dashed #ccc;
}
</style>
</head>

<body>

<header>
  <h1>RIZIN</h1>
  <p>予想対決</p>
</header>

<main id="app"></main>

<section class="hit-rate">
  全体的中率：<b id="all">0%</b> /
  神戸：<b id="kobe">0%</b> /
  田代：<b id="tashiro">0%</b>
</section>

<script>
const STORAGE_KEY = "rizin_results";

const matches = [
  { id: 1, kobe: "選手A", tashiro: "選手B" },
  { id: 2, kobe: "選手C", tashiro: "選手D" }
];

const app = document.getElementById("app");
let results = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");

matches.forEach(m => {
  const div = document.createElement("div");
  div.className = "match";

  div.innerHTML = `
    <div class="names">
      <span>神戸：${m.kobe}</span>
      <span>田代：${m.tashiro}</span>
    </div>
    <select data-id="${m.id}">
      <option value="">結果未入力</option>
      <option value="${m.kobe}">${m.kobe}</option>
      <option value="${m.tashiro}">${m.tashiro}</option>
    </select>
  `;

  const select = div.querySelector("select");
  select.value = results[m.id] || "";
  select.addEventListener("change", e => {
    results[m.id] = e.target.value;
    localStorage.setItem(STORAGE_KEY, JSON.stringify(results));
    updateRate();
  });

  app.appendChild(div);
});

function updateRate() {
  let total = 0, hitK = 0, hitT = 0;

  matches.forEach(m => {
    const r = results[m.id];
    if (!r) return;
    total++;
    if (r === m.kobe) hitK++;
    if (r === m.tashiro) hitT++;
  });

  const rate = (h, t) => t === 0 ? "0%" : Math.round(h / t * 100) + "%";

  document.getElementById("kobe").textContent = rate(hitK, total);
  document.getElementById("tashiro").textContent = rate(hitT, total);
  document.getElementById("all").textContent = rate(hitK + hitT, total * 2);
}

updateRate();
</script>

</body>
</html>
