<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>RIZIN 予想対決</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #fafafa;
  color: #333;
  padding-bottom: 240px;
}

header {
  text-align: center;
  padding: 32px 16px;
  border-bottom: 3px solid #e60012;
}

header h1 {
  margin: 0;
  color: #e60012;
  letter-spacing: 6px;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 24px 16px;
}

.match {
  background: #fff;
  border-left: 6px solid #e60012;
  padding: 16px;
  margin-bottom: 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}

.match-title {
  font-weight: bold;
  margin-bottom: 6px;
}

.players {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  font-weight: 600;
}

.controls {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

select {
  padding: 10px;
  font-size: 14px;
}

.summary {
  margin-top: 8px;
  font-size: 13px;
  color: #555;
}

footer {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: #fff;
  border-top: 3px solid #e60012;
  box-shadow: 0 -4px 12px rgba(0,0,0,0.12);
}

.footer-inner {
  max-width: 900px;
  margin: 0 auto;
  padding: 16px;
}

.scores {
  display: flex;
  justify-content: space-around;
  font-size: 20px;
  font-weight: bold;
  color: #e60012;
}

.result {
  text-align: center;
  margin: 8px 0;
  font-weight: bold;
}

.rates {
  text-align: center;
  font-size: 13px;
  color: #555;
}
</style>
</head>

<body>

<header>
  <h1>RIZIN</h1>
  <p>予想対決</p>
</header>

<div class="container" id="matches"></div>

<footer>
  <div class="footer-inner">
    <div class="scores">
      <div>神戸：<span id="kobeScore">0</span>円</div>
      <div>田代：<span id="tashiroScore">0</span>円</div>
    </div>

    <div class="result" id="winnerText">引き分け</div>

    <div class="rates">
      全体：<span id="allRate">0</span>% /
      神戸：<span id="kobeRate">0</span>% /
      田代：<span id="tashiroRate">0</span>%
    </div>
  </div>
</footer>

<script>
const matches = [
  { no:15, k:"ラジャブアリ・シェイドゥラエフ", t:"朝倉未来" },
  { no:14, k:"イルホム・ノジモフ", t:"ホベルト・サトシ・ソウザ" },
  { no:13, k:"扇久保博正", t:"元谷友貴" },
  { no:12, k:"井上直樹", t:"ダニー・サバテロ" },
  { no:11, k:"RENA", t:"伊澤星花" },
  { no:10, k:"サガール・ケラモフ", t:"クレベル・コイケ" },
  { no:9, k:"安藤達也", t:"福田龍彌" },
  { no:8, k:"新居すぐる", t:"秋元強真" },
  { no:7, k:"久保優太", t:"カルシャガ・ダウトベック" },
  { no:6, k:"神龍誠", t:"ヒロヤ" },
  { no:5, k:"後藤丈治", t:"ホセ・トーレス" },
  { no:4, k:"冨澤大智", t:"篠塚辰樹" },
  { no:3, k:"雑賀ヤン坊達也", t:"ベイノア・イブラヒム" },
  { no:2, k:"芦澤竜誠", t:"ジョリー" },
  { no:1, k:"須田健律", t:"ヤマト・エンゾ・マキ" }
];

const container = document.getElementById("matches");

matches.forEach((m, i) => {
  const div = document.createElement("div");
  div.className = "match";
  div.innerHTML = `
    <div class="match-title">第${m.no}試合 ${m.no >= 11 ? "（タイトル）" : ""}</div>
    <div class="players">
      <span>神戸：${m.k}</span>
      <span>田代：${m.t}</span>
    </div>
    <div class="controls">
      <select class="winner">
        <option value="">勝者未入力</option>
        <option value="k">神戸</option>
        <option value="t">田代</option>
      </select>
      <select class="method">
        <option value="">決まり手未入力</option>
        <option value="judge">判定</option>
        <option value="finish">KO / 一本</option>
      </select>
    </div>
    <div class="summary">未確定</div>
  `;
  container.appendChild(div);
});

document.querySelectorAll("select").forEach(s =>
  s.addEventListener("change", calculate)
);

// ページ読み込み時に保存された選択を復元
function restoreSelections() {
  document.querySelectorAll(".match").forEach((m, i) => {
    const winner = m.querySelector(".winner");
    const method = m.querySelector(".method");

    const savedWinner = localStorage.getItem(`match${i}_winner`);
    const savedMethod = localStorage.getItem(`match${i}_method`);

    if (savedWinner) winner.value = savedWinner;
    if (savedMethod) method.value = savedMethod;
  });
  calculate();
}

function calculate() {
  let kScore = 0, tScore = 0;
  let decided = 0, kHit = 0, tHit = 0;

  document.querySelectorAll(".match").forEach((m, i) => {
    const winner = m.querySelector(".winner").value;
    const method = m.querySelector(".method").value;
    const summary = m.querySelector(".summary");

    // 選択内容をlocalStorageに保存
    localStorage.setItem(`match${i}_winner`, winner);
    localStorage.setItem(`match${i}_method`, method);

    if (!winner || !method) {
      summary.textContent = "未確定";
      return;
    }

    decided++;

    let base = method === "judge" ? 500 : 1000;
    if (matches[i].no >= 11) base *= 2;

    const winnerName = winner === "k" ? "神戸" : "田代";
    const methodName = method === "judge" ? "判定" : "KO / 一本";

    summary.textContent = `${winnerName} 勝利（${methodName}） +${base}円`;

    if (winner === "k") { kScore += base; kHit++; }
    if (winner === "t") { tScore += base; tHit++; }
  });

  document.getElementById("kobeScore").textContent = kScore;
  document.getElementById("tashiroScore").textContent = tScore;

  document.getElementById("winnerText").textContent =
    kScore > tScore ? "神戸 リード" :
    tScore > kScore ? "田代 リード" : "引き分け";

  document.getElementById("allRate").textContent =
    decided ? Math.round((kHit + tHit) / (decided * 2) * 100) : 0;
  document.getElementById("kobeRate").textContent =
    decided ? Math.round(kHit / decided * 100) : 0;
  document.getElementById("tashiroRate").textContent =
    decided ? Math.round(tHit / decided * 100) : 0;
}

// ページ読み込み完了時に復元
restoreSelections();
</script>

</body>
</html>
