<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>RIZIN äºˆæƒ³å¯¾æ±º</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: #fafafa;
  color: #333;
  padding-bottom: 240px;
}

header {
  text-align: center;
  padding: 32px 16px;
  border-bottom: 3px solid #e60012;
}

header h1 {
  margin: 0;
  color: #e60012;
  letter-spacing: 6px;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 24px 16px;
}

.match {
  background: #fff;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  border: 2px solid #f0f0f0;
}

.match-title {
  font-weight: bold;
  margin-bottom: 12px;
  color: #e60012;
  text-align: center;
  font-size: 15px;
}

.players {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  gap: 16px;
}

.player {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.player-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  font-weight: bold;
  color: white;
  margin-bottom: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.player-avatar.kobe {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.player-avatar.tashiro {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.player-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

.player-name {
  font-weight: 600;
  font-size: 13px;
  color: #333;
  line-height: 1.3;
}

.vs {
  font-size: 24px;
  font-weight: bold;
  color: #e60012;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
}

.controls {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

select {
  padding: 10px 12px;
  font-size: 14px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  background: white;
  cursor: pointer;
  transition: border-color 0.2s;
}

select:hover {
  border-color: #e60012;
}

select:focus {
  outline: none;
  border-color: #e60012;
  box-shadow: 0 0 0 3px rgba(230, 0, 18, 0.1);
}

.summary {
  margin-top: 12px;
  padding: 8px 12px;
  font-size: 13px;
  color: #555;
  background: #f8f8f8;
  border-radius: 6px;
  text-align: center;
  font-weight: 500;
}

footer {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: #fff;
  border-top: 3px solid #e60012;
  box-shadow: 0 -4px 12px rgba(0,0,0,0.12);
}

.footer-inner {
  max-width: 900px;
  margin: 0 auto;
  padding: 16px;
}

.scores {
  display: flex;
  justify-content: space-around;
  font-size: 20px;
  font-weight: bold;
  color: #e60012;
}

.result {
  text-align: center;
  margin: 8px 0;
  font-weight: bold;
}

.rates {
  text-align: center;
  font-size: 13px;
  color: #555;
}
</style>
</head>

<body>

<header>
  <h1>RIZIN</h1>
  <p>äºˆæƒ³å¯¾æ±º</p>
</header>

<div class="container" id="matches"></div>

<footer>
  <div class="footer-inner">
    <div class="scores">
      <div>ç¥æˆ¸ï¼š<span id="kobeScore">0</span>å††</div>
      <div>ç”°ä»£ï¼š<span id="tashiroScore">0</span>å††</div>
    </div>

    <div class="result" id="winnerText">å¼•ãåˆ†ã‘</div>

    <div class="rates">
      å…¨ä½“ï¼š<span id="allRate">0</span>% /
      ç¥æˆ¸ï¼š<span id="kobeRate">0</span>% /
      ç”°ä»£ï¼š<span id="tashiroRate">0</span>%
    </div>
  </div>
</footer>

<script>
const matches = [
  { no:15, k:"ãƒ©ã‚¸ãƒ£ãƒ–ã‚¢ãƒªãƒ»ã‚·ã‚§ã‚¤ãƒ‰ã‚¥ãƒ©ã‚¨ãƒ•", t:"æœå€‰æœªæ¥", kImg:"", tImg:"" },
  { no:14, k:"ã‚¤ãƒ«ãƒ›ãƒ ãƒ»ãƒã‚¸ãƒ¢ãƒ•", t:"ãƒ›ãƒ™ãƒ«ãƒˆãƒ»ã‚µãƒˆã‚·ãƒ»ã‚½ã‚¦ã‚¶", kImg:"", tImg:"" },
  { no:13, k:"æ‰‡ä¹…ä¿åšæ­£", t:"å…ƒè°·å‹è²´", kImg:"", tImg:"" },
  { no:12, k:"äº•ä¸Šç›´æ¨¹", t:"ãƒ€ãƒ‹ãƒ¼ãƒ»ã‚µãƒãƒ†ãƒ­", kImg:"", tImg:"" },
  { no:11, k:"RENA", t:"ä¼Šæ¾¤æ˜ŸèŠ±", kImg:"", tImg:"" },
  { no:10, k:"ã‚µã‚¬ãƒ¼ãƒ«ãƒ»ã‚±ãƒ©ãƒ¢ãƒ•", t:"ã‚¯ãƒ¬ãƒ™ãƒ«ãƒ»ã‚³ã‚¤ã‚±", kImg:"", tImg:"" },
  { no:9, k:"å®‰è—¤é”ä¹Ÿ", t:"ç¦ç”°é¾å½Œ", kImg:"", tImg:"" },
  { no:8, k:"æ–°å±…ã™ãã‚‹", t:"ç§‹å…ƒå¼·çœŸ", kImg:"", tImg:"" },
  { no:7, k:"ä¹…ä¿å„ªå¤ª", t:"ã‚«ãƒ«ã‚·ãƒ£ã‚¬ãƒ»ãƒ€ã‚¦ãƒˆãƒ™ãƒƒã‚¯", kImg:"", tImg:"" },
  { no:6, k:"ç¥é¾èª ", t:"ãƒ’ãƒ­ãƒ¤", kImg:"", tImg:"" },
  { no:5, k:"å¾Œè—¤ä¸ˆæ²»", t:"ãƒ›ã‚»ãƒ»ãƒˆãƒ¼ãƒ¬ã‚¹", kImg:"", tImg:"" },
  { no:4, k:"å†¨æ¾¤å¤§æ™º", t:"ç¯ å¡šè¾°æ¨¹", kImg:"", tImg:"" },
  { no:3, k:"é›‘è³€ãƒ¤ãƒ³åŠé”ä¹Ÿ", t:"ãƒ™ã‚¤ãƒã‚¢ãƒ»ã‚¤ãƒ–ãƒ©ãƒ’ãƒ ", kImg:"", tImg:"" },
  { no:2, k:"èŠ¦æ¾¤ç«œèª ", t:"ã‚¸ãƒ§ãƒªãƒ¼", kImg:"", tImg:"" },
  { no:1, k:"é ˆç”°å¥å¾‹", t:"ãƒ¤ãƒãƒˆãƒ»ã‚¨ãƒ³ã‚¾ãƒ»ãƒã‚­", kImg:"", tImg:"" }
];

// é¸æ‰‹åã‹ã‚‰ã‚¤ãƒ‹ã‚·ãƒ£ãƒ«ã‚’å–å¾—
function getInitials(name) {
  const parts = name.split(/[ãƒ»\s]+/);
  if (parts.length >= 2) {
    return parts[0].charAt(0) + parts[parts.length - 1].charAt(0);
  }
  return name.substring(0, 2);
}

const container = document.getElementById("matches");

matches.forEach((m, i) => {
  const div = document.createElement("div");
  div.className = "match";

  // ç”»åƒãŒã‚ã‚‹å ´åˆã¯ç”»åƒã‚’ã€ãªã„å ´åˆã¯ã‚¤ãƒ‹ã‚·ãƒ£ãƒ«ã‚’è¡¨ç¤º
  const kobeAvatar = m.kImg
    ? `<img src="${m.kImg}" alt="${m.k}" onerror="this.parentElement.innerHTML='${getInitials(m.k)}'">`
    : getInitials(m.k);
  const tashiroAvatar = m.tImg
    ? `<img src="${m.tImg}" alt="${m.t}" onerror="this.parentElement.innerHTML='${getInitials(m.t)}'">`
    : getInitials(m.t);

  div.innerHTML = `
    <div class="match-title">ç¬¬${m.no}è©¦åˆ ${m.no >= 11 ? "ğŸ† ã‚¿ã‚¤ãƒˆãƒ«æˆ¦" : ""}</div>
    <div class="players">
      <div class="player">
        <div class="player-avatar kobe">${kobeAvatar}</div>
        <div class="player-name">ç¥æˆ¸<br>${m.k}</div>
      </div>
      <div class="vs">VS</div>
      <div class="player">
        <div class="player-avatar tashiro">${tashiroAvatar}</div>
        <div class="player-name">ç”°ä»£<br>${m.t}</div>
      </div>
    </div>
    <div class="controls">
      <select class="winner">
        <option value="">å‹è€…æœªå…¥åŠ›</option>
        <option value="k">ç¥æˆ¸ï¼ˆ${m.k}ï¼‰</option>
        <option value="t">ç”°ä»£ï¼ˆ${m.t}ï¼‰</option>
      </select>
      <select class="method">
        <option value="">æ±ºã¾ã‚Šæ‰‹æœªå…¥åŠ›</option>
        <option value="judge">åˆ¤å®š</option>
        <option value="finish">KO / ä¸€æœ¬</option>
      </select>
    </div>
    <div class="summary">æœªç¢ºå®š</div>
  `;
  container.appendChild(div);
});

document.querySelectorAll("select").forEach(s =>
  s.addEventListener("change", calculate)
);

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ä¿å­˜ã•ã‚ŒãŸé¸æŠã‚’å¾©å…ƒ
function restoreSelections() {
  document.querySelectorAll(".match").forEach((m, i) => {
    const winner = m.querySelector(".winner");
    const method = m.querySelector(".method");

    const savedWinner = localStorage.getItem(`match${i}_winner`);
    const savedMethod = localStorage.getItem(`match${i}_method`);

    if (savedWinner) winner.value = savedWinner;
    if (savedMethod) method.value = savedMethod;
  });
  calculate();
}

function calculate() {
  let kScore = 0, tScore = 0;
  let decided = 0, kHit = 0, tHit = 0;

  document.querySelectorAll(".match").forEach((m, i) => {
    const winner = m.querySelector(".winner").value;
    const method = m.querySelector(".method").value;
    const summary = m.querySelector(".summary");

    // é¸æŠå†…å®¹ã‚’localStorageã«ä¿å­˜
    localStorage.setItem(`match${i}_winner`, winner);
    localStorage.setItem(`match${i}_method`, method);

    if (!winner || !method) {
      summary.textContent = "æœªç¢ºå®š";
      return;
    }

    decided++;

    let base = method === "judge" ? 500 : 1000;
    if (matches[i].no >= 11) base *= 2;

    const winnerName = winner === "k" ? "ç¥æˆ¸" : "ç”°ä»£";
    const methodName = method === "judge" ? "åˆ¤å®š" : "KO / ä¸€æœ¬";

    summary.textContent = `${winnerName} å‹åˆ©ï¼ˆ${methodName}ï¼‰ +${base}å††`;

    if (winner === "k") { kScore += base; kHit++; }
    if (winner === "t") { tScore += base; tHit++; }
  });

  document.getElementById("kobeScore").textContent = kScore;
  document.getElementById("tashiroScore").textContent = tScore;

  document.getElementById("winnerText").textContent =
    kScore > tScore ? "ç¥æˆ¸ ãƒªãƒ¼ãƒ‰" :
    tScore > kScore ? "ç”°ä»£ ãƒªãƒ¼ãƒ‰" : "å¼•ãåˆ†ã‘";

  document.getElementById("allRate").textContent =
    decided ? Math.round((kHit + tHit) / (decided * 2) * 100) : 0;
  document.getElementById("kobeRate").textContent =
    decided ? Math.round(kHit / decided * 100) : 0;
  document.getElementById("tashiroRate").textContent =
    decided ? Math.round(tHit / decided * 100) : 0;
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«å¾©å…ƒ
restoreSelections();
</script>

</body>
</html>
